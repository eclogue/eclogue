project: linger
author: shisang
email: adming@admin.com
repo: https://github.com
home_path: {{ home_path }}
dommain: "http://localhost:5001"
log:
  eclogue: {{ home_path }}/storage/logs
  ansible: {{ home_path }}/storage/logs
logging:
  version: 1
  loggers:
    file:
      level: DEBUG
      handlers:
        - file
    eclogue:
      level: DEBUG
      handlers:
        - file
        - mongo
    console:
      level: DEBUG
      propagate: 0
      handlers:
        - console
  handlers:
    mongo:
      (): eclogue.lib.logger.MongoHandler
      level: INFO
      formatter: mongo
      filters:
        - requestId
    file:
      class: logging.handlers.RotatingFileHandler
      filename: {{ home_path }}/storage/logs/eclogue.log
      level: DEBUG
    console:
      (): eclogue.lib.logger.ConsoleHandler
      level: DEBUG
    default:
      class: logging.StreamHandler
      level: DEBUG
      formatter: simple
      stream: ext://sys.stdout
  formatters:
    simple:
      formate: '%(asctime)s - %(name)s - %(levelname)s - %(message)s'
      datefmt: '%Y-%m-%d %H:%M:%S'
    mongo:
      (): eclogue.lib.logger.MongoFormatter
  filters:
    requestId:
      (): flask_log_request_id.RequestIDLogFilter
  root:
    level: DEBUG
    handlers:
      - default
      - file
workspace:
  tmp: {{ home_path }}/storage/tmp
  playbook: {{ home_path }}/storage/tmp
  base_dir: {{ home_path }}/storage/eclogue
  job: {{ home_path }}/storage/eclogue/job
  build: {{ home_path }}/storage/eclogue/job
jenkins:
  default:
    base_url: xx
    username: xx
    password: xx
gitlab:
  token: xx
  base_url: https://gitlab.com
vault:
  secret: xx

mongodb:
  uri: 'mongodb://root:password@localhost/?authSource=admin&authMechanism=SCRAM-SHA-1'
  db: 'eclogue'
jwt:
  key: '2:sha256:50000$testset'
  iss: 'https://devops.eclogueio.com'
  aud: 'https://eclogueio.com'
  header:
    alg: 'HS256'
  exp: 604800
redis:
  conn:
    host: localhost
    port: 6379
    decode_responses: !!bool "true"

celery:
  broker: redis://localhost:6379
  backend: 'mongodb://root:password@localhost/upward?authSource=admin&authMechanism=SCRAM-SHA-1'
  mongodb_backend_settings:
    taskmeta_collection: job_result
